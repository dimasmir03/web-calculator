# –ù–ï–†–£–ì–ê–ô–¢–ï –Ø –í–°–Å –ò–°–ü–†–ê–í–õ–Æ, –Ω–∞–ø–∏—à–∏ issue —á—Ç–æ –≥–æ—Ç–æ–≤—ã –¥–∞—Ç—å –≤—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –Ω–µ–¥–æ—á–µ—Ç–æ–≤

## –°–ü–ê–°–ò–ë–û

## @dimajustgo  

# –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

[![Go Report Card](https://goreportcard.com/badge/github.com/dimasmir03/web-calculator)](https://goreportcard.com/report/github.com/diamsmir03/web-calculator)
[![Docker Pulls](https://img.shields.io/docker/pulls/dimasmir/calc-server)](https://hub.docker.com/r/dimasmir/calc-server)

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
- [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- [–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã](#–∑–∞–ø—É—Å–∫-—Å–∏—Å—Ç–µ–º—ã)
  - [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
  - [Docker Compose](#docker-compose)
  - [–†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞](#—Ä—É—á–Ω–∞—è-—Å–±–æ—Ä–∫–∞)
- [API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–°—Ç–∞—Ç—É—Å—ã –≤—ã—Ä–∞–∂–µ–Ω–∏–π](#—Å—Ç–∞—Ç—É—Å—ã-–≤—ã—Ä–∞–∂–µ–Ω–∏–π)
- [–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤](#–ø—Ä–∏–º–µ—Ä—ã-–∑–∞–ø—Ä–æ—Å–æ–≤)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã](#–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏-—Ä–∞–±–æ—Ç—ã)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TD
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] --> B[–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä]
    B --> C{–ü–∞—Ä—Å–∏–Ω–≥ –≤—ã—Ä–∞–∂–µ–Ω–∏—è}
    C --> D[AST/RPN]
    D --> E[–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á]
    E --> F[–ê–≥–µ–Ω—Ç—ã]
    F --> G[–†–µ–∑—É–ª—å—Ç–∞—Ç—ã]
    G --> B
    B --> A
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üñ• –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (–°–µ—Ä–≤–µ—Ä)

1. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ –∑–∞–¥–∞—á–∏
3. –£–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—å—é –∑–∞–¥–∞—á
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

### ‚ö° –ê–≥–µ–Ω—Ç (–í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å)

1. –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–¥–∞—á–∏ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (–°–µ—Ä–≤–µ—Ä–∞)
2. –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–¥–∞—á–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
3. –í—ã–ø–æ–ª–Ω—è–µ—Ç –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
4. –†–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω–∞—Ö
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

Docker –∏ Docker Compose  
Go 1.24+
Make

### Docker Compose

```bash
# 1. –°–∫–∞—á–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
  git clone https://github.com/diamsmir03/web-calculator.git
  cd web-calculator

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
  docker-compose up --build
# –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8080
# –ê–≥–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
```

### –†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞

```bash
# 1. –°–∫–∞—á–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
  git clone https://github.com/diamsmir03/web-calculator.git
  cd web-calculator
# –°–µ—Ä–≤–µ—Ä
  cd server
  go build -o server ./cmd/server
  TIME_ADDITION_MS=1000 ./server

# –ê–≥–µ–Ω—Ç (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
  cd agent
  go build -o agent ./cmd/agent
  SERVER_URL=http://localhost:8080 ./agent
```

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ Swagger UI:
<http://localhost:8080/swagger/index.html>

### –ö–æ–ª–ª–µ–∫—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ [Postman Collection](https://app.getpostman.com/join-team?invite_code=9cac2ae36844ef092a1cdc71606cb988f42f99edaf7d3ff684768b7782fee6eb)

## –°—Ç–∞—Ç—É—Å—ã –≤—ã—Ä–∞–∂–µ–Ω–∏–π

| –°—Ç–∞—Ç—É—Å     | –û–ø–∏—Å–∞–Ω–∏–µ              | HTTP –ö–æ–¥ |
|------------|-----------------------|----------|
| pending    | –û–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è    | 201      |
| processing | –í –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è | 200      |
| completed  | –£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ     | 200      |
| error      | –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ | 422      |

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

- –î–æ–±–∞–≤–∏—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ

```bash
  curl --location 'localhost/api/v1/calculate' \
  --header 'Content-Type: application/json' \
  --data '{
    "expression": "(2+3)*4"
  }'
```

–û—Ç–≤–µ—Ç:

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
}
```

- –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å:

```bash
  curl http://localhost:8080/api/v1/expressions/550e8400-e29b-41d4-a716-446655440000
```

–û—Ç–≤–µ—Ç:

```json
{
  "expressions": [
    {
      "id": "2225fdb3-2e84-4308-8bb1-cc5e20ba77e4",
      "expression": "2*3",
      "status": "pending",
      "result": 0
    },
    {
      "id": "7631907e-9ec0-49e6-94b6-4b165dfe4404",
      "expression": "(2+5)*4",
      "status": "pending",
      "result": 0
    }
  ]
}
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

  1.–°–µ—Ä–≤–µ—Ä

```ini
  PORT=8080
  TIME_ADDITION_MS=1000       # –í—Ä–µ–º—è —Å–ª–æ–∂–µ–Ω–∏—è (–º—Å)
  TIME_SUBTRACTION_MS=1000    # –í—Ä–µ–º—è –≤—ã—á–∏—Ç–∞–Ω–∏—è
  TIME_MULTIPLICATION_MS=1000 # –í—Ä–µ–º—è —É–º–Ω–æ–∂–µ–Ω–∏—è
  TIME_DIVISION_MS=1000       # –í—Ä–µ–º—è –¥–µ–ª–µ–Ω–∏—è
```

  2.–ê–≥–µ–Ω—Ç

```ini
  SERVER_URL=http://host.docker.internal:8080  # URL –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
  COMPUTING_POWER=4                           # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω
  TIME_WAIT_MS=1000                           # –ó–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã

–ü–∞—Ä—Å–∏–Ω–≥ –≤—ã—Ä–∞–∂–µ–Ω–∏–π: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è RPN (–û–±—Ä–∞—Ç–Ω–∞—è –ü–æ–ª—å—Å–∫–∞—è –ó–∞–ø–∏—Å—å) –∏ AST

–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è: –ê–≥–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞

–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–≤—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ —Å–±–æ—è—Ö

–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
  # –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≥–µ–Ω—Ç–æ–≤
  docker-compose up --scale agent=3
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- –°–µ—Ä–≤–µ—Ä:
- Go,
- Echo Framework,
- Swagger
- –ê–≥–µ–Ω—Ç:
- Go Routines,
- HTTP Client
- –ü–∞—Ä—Å–∏–Ω–≥:
- AST,
- RPN
- –î–µ–ø–ª–æ–π:
- Make
- Docker,
- Docker Compose
